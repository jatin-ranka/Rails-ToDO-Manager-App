<h1>This is todos list</h1>

<h2>Todos: <%= Todo.count%> </h2>

<form action="/todos" method="post">
  <input type="text" name="todo_text" placeholder="Type todo here...">
  <input type="date" name="due_date">
  <button type="submit"> Add </button>
</form>

<ul>
    <% Todo.order(:id).each do |todo| %>
      <li class="todo">

        <%= form_with url: "/todos/#{todo.id}", method: :put do %>
          <input
            name="completed"
            type="checkbox"
            <%= todo.completed   ? "checked" : "" %>
            onclick="this.form.submit()"
          />
        <% end %>


        <p class="">
          <%= todo.id %>
        </p>

        <p class="todo-text <%= todo.completed ? 'strike' : '' %>">
          <%= todo.todo_text %>
        </p>

        <% unless todo.due_today? %>
          <p class="due-date">
            <%= todo.due_date.to_s(:short) %>
          </p>
        <% end %>

      </li>
    <% end %>
  </ul>
